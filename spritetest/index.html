<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Sprite Animation</title>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script>

    var canvas,
        ctx,
        imgAssets;

        //player starting pos
    var playerX = 10,
        playerY = 10;
        

    var playerSpriteArray = [

    ];
    const PLAYER_SPRITES = 12;
    var playerSpritesCount = 0;

        //sprite measurements
    const SPRITE_W = 32,
          SPRITE_H = 36,
          SHEET_W = 96,
          SHEET_H = 144;


    window.onload = () => {
        canvas = document.getElementById('canvas');
        ctx = canvas.getContext('2d');
        //load sprite sheet
        imgAssets = imgLoader();
        //update interval
        setInterval(update, 1000/50);
        

    }

    function update() {
        // canvas
        drawRect(0,0, canvas.width, canvas.height, 'gray');
        // player
        // drawPlayer(imgAssets.player, sourceX, sourceY, SPRITE_W, SPRITE_H, playerX, playerY, SPRITE_W, SPRITE_H);
        drawSpriteSheetTest(imgAssets.player);
    }
    
    function imgLoader() {
        var imgs = {};

        imgs.player = new Image();
        imgs.player.src = 'ranger_m.png';

        return imgs;
    }


    // TODO
    // generate array of objs with each obj holding values to pass
    // to drawPlayer func. map the array.
    function drawSpriteSheetTest(obj) {

        var drawX = 0,
            drawY = 0;

        var spritesObj = {};
    
        for(eachRow = 0; eachRow <= SHEET_H; eachRow + SPRITE_H) {

            var counter = 0;

            for(eachCol = 0; eachCol <= SHEET_W; eachCol + SPRITE_W) {
                drawPlayer(obj, eachCol, eachRow, SPRITE_W, SPRITE_H, drawX, drawY, SPRITE_W, SPRITE_H);
                spritesObj[counter] = drawPlayer(obj, eachCol, eachRow, SPRITE_W, SPRITE_H, drawX, drawY, SPRITE_W, SPRITE_H);

                eachCol += SPRITE_W;
                drawX += SPRITE_W;

            }
            eachRow += SPRITE_H;
            drawY += SPRITE_H;
            eachCol = 0;
            drawX = 0;
            counter++;

        }
        console.log(spritesObj);
        //  ctx.drawImage(spritesObj[4], 400, 400);
           // drawPlayer(obj, sourceX, sourceY, SPRITE_W, SPRITE_H, drawX, drawY, SPRITE_W, SPRITE_H);
         
    }

    

    function drawPlayer(img, sX, sY, sW, sH, dX, dY, dW, dH) {
        // img = image source, sX/sY/sW/sH = source measurements on image
        //                     dX/dY/dW/dH = where to draw on canvas
        ctx.drawImage(img, sX, sY, sW, sH, dX, dY, dW, dH);
    }

    function drawRect(x, y, w, h, color) {
        ctx.fillStyle = color;
        ctx.fillRect(x,y,w,h);
    }

    </script>
</body>
</html>